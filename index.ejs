<!DOCTYPE html>
<html ng-app="WalkImproveApp">
  <head>
    <meta charset="utf-8">
    <title>WalkImrpove</title>
    <link rel="stylesheet" href="css/style.css">

    <script type="text/javascript">
       var backendUrl = "<%= backendUrl %>";
    </script>
    <script src="/js/jwt-decode.2.0.1.js"></script>


    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.7/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.5/angular-resource.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.18/angular-ui-router.js"></script>


    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAa63CRm6piQT6Q6iwT_VmclKFx6-gNeq4&callback=initMap"
     type="text/javascript"></script>

    <!-- <script src="https://maps.googleapis.com/maps/api/js"></script> -->

    <script>
    function initMap() {
      var mapProp = {
        center:new google.maps.LatLng(34.02,-118.5),
        zoom:14,
        mapTypeId:google.maps.MapTypeId.ROADMAP
      };
      var map=new google.maps.Map(document.getElementById("googleMap"),mapProp);
      // google.maps.event.addDomListener(window, 'load', initialize);
    }

    </script>

  </head>
  <body>
  <div class="back">

    <header ng-controller="NavbarController as vm">
      <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container">
          <a ui-sref="welcome" class="navbar-brand">Home</a>
          <button ng-hide="vm.authService.isLoggedIn()" ui-sref="signin" type="button" class="btn btn-default navbar-btn navbar-right">Sign in</button>
          <button ng-show="vm.authService.isLoggedIn()" ng-click= "vm.authService.logOut()" type="button" class="btn btn-default navbar-btn navbar-right">Sign out</button>
        </div>
      </nav>
    </header>

    <section ng-controller="ReportsController as reportsCtrl" >
    <h1> Welcome to WalkImprove!
    <p>Use the interactive map to help figure out where you are and then use the form below to post poor sidewalk conditions</p>

    <div id="googleMap" style="width:500px;height:380px;"></div>

    <h3>Poor side walk report form</h3>
    <form id="newReport" ng-submit="reportsCtrl.addReport()">
    <!-- <div>
      <label for="id">ID (placeholder to be removed for autogenerated mongo id):</label>
      <input type="text" name="id" ng-model="reportsCtrl.newReport.id">
    </div> -->
    <div>
      <label for="intersection">Intersection ex. 21st and Pico:</label>
      <input type="text" ng-model="reportsCtrl.newReport.intersection" name="intersection">
    </div>
    <div>
      <label for="direction">Direction ex. North West:</label>
      <input type="text" ng-model="reportsCtrl.newReport.direction" name="direction">
    </div>
    <div>
      <label for="details">Details ex. Tree Roots:</label>
      <input type="text" ng-model="reportsCtrl.newReport.details" name="details">
    </div>
    <div>
      <input type="submit" value="Add Report">
    </div>
  </form>

      <div class="heading" class="back">
        <h2>Current Reports</h2>
      </div>
      <hr>

      <ul id="reports">
        <li ng-repeat="report in reportsCtrl.all">
          <div id="posttop">Poor SideWalk Report</div>
          <h3> @Intersection</h3>{{report.intersection}}
          <h3> Direction</h3> {{report.direction}}
          <h3> Details</h3> {{report.details}}
          <h3> Delete Report </h3> <button ng-click="reportsCtrl.deleteReport(report)" class="delete">X</button>
          <hr>
      </li>
      </ul>

    </section>
  </div>

    <script src="./js/app.js" charset="utf-8"></script>
    <script src="./js/reportsContoller.js" charset="utf-8"></script>
    <script src="/js/app.module.js"></script>
    <script src="/js/app.routes.js"></script>
    <script src="/js/token.service.js"></script>
    <script src="/js/auth.service.js"></script>
    <script src="/js/user.service.js"></script>
    <script src="/js/signin.controller.js"></script>
    <script src="/js/navbar.controller.js"></script>
  </body>
</html>
